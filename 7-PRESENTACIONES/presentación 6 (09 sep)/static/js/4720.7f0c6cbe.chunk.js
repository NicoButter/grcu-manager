"use strict";(self.webpackChunk_genially_view_client=self.webpackChunk_genially_view_client||[]).push([[4720],{45577:(e,i,t)=>{t.d(i,{q:()=>a});var l=t(45992),n=t(17588),s=t(66264),d=t(60708),o=t(10549),r=t(5441);const a=e=>{let{getItems:i,item:t,menuType:a,theme:m,shouldCloseWhenClickOutside:c=!1,itemSize:u,menuTheme:h}=e;const[v,g]=(0,n.useState)(i()),[f,p]=(0,n.useState)(!1),T=(0,n.useCallback)((()=>{p((e=>!e))}),[]);(0,n.useEffect)((()=>{const e=null===t||void 0===t?void 0:t.on(s.q.Message,(e=>{e===d.m.Entering&&(g(i()),p(!1))}));return()=>{null===e||void 0===e||e()}}),[i,t]);const S=function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=(0,n.useRef)(null);return(0,n.useEffect)((()=>{const l=i=>{t.current&&!t.current.contains(i.target)&&e(i)};return document.addEventListener("mouseup",l,i),document.addEventListener("touchend",l,i),()=>{document.removeEventListener("mouseup",l,i),document.removeEventListener("touchend",l,i)}}),[t,e,i]),t}((0,n.useCallback)((()=>{c&&f&&p(!1)}),[f,c]),!0);(0,n.useEffect)((()=>{g(i())}),[i]);const y=(0,o.CO)(a);return(0,r.T)({theme:m,children:(0,l.jsx)(y,{items:v,onToggleClick:T,opened:f,ref:S,theme:m,itemSize:u,menuTheme:h})})}},15690:(e,i,t)=>{t.d(i,{M:()=>p});var l=t(45992),n=t(17588),s=t(15536),d=t(89035),o=t(21646);const r=()=>{},a=(0,n.forwardRef)(((e,i)=>{let{menuTheme:t}=e;const n=r;return(0,l.jsx)(o.W1,{ref:i,$menuTheme:t,style:{margin:s.I,width:`calc(100% - ${2*s.I}px)`,height:`calc(100% - ${2*s.I}px)`},children:(0,l.jsxs)(o.YT,{"data-nav-element":"hamburger-menu-toggle",$width:d.sf,children:[(0,l.jsx)(o.e3,{}),(0,l.jsx)(o.cl,{onClick:n,role:"button",children:(0,l.jsx)(o.h_,{children:(0,l.jsx)(o.RG,{$visible:!0})})})]})})}));var m=t(58424),c=t(73242);const u=Math.random().toString(36).substring(7),h=()=>{},v=(0,n.forwardRef)(((e,i)=>{let{items:t,menuTheme:n}=e;const d=`mainMenu-${u}`,o=h,{ref:r,hasScroll:a}=(0,m.x)();return(0,l.jsxs)(c.W1,{"aria-labelledby":d,role:"menu",ref:i,$menuTheme:n,style:{margin:s.I,width:`calc(100% - ${2*s.I}px)`,height:`calc(100% - ${2*s.I}px)`},children:[a.horizontal&&(0,l.jsx)(c.hh,{onClick:o,$menuTheme:n,$disabled:!0,children:(0,l.jsx)(c.rZ,{})}),(0,l.jsx)(c.JU,{id:d,children:"Main menu"}),(0,l.jsx)(c.e3,{}),(0,l.jsx)(c.QS,{ref:r,children:t.map((e=>(0,l.jsx)(c.d,{$isLink:e.isLink,$isActive:e.isActive,$isAllowed:e.isAllowed,$menuTheme:n,children:(0,l.jsx)(c.Dr,{tabIndex:-1,"aria-label":e.altText||void 0,"aria-disabled":!e.altText,children:(0,l.jsx)(c.gi,{children:e.text})})},e.text+e.key)))}),a.horizontal&&(0,l.jsx)(c.hh,{onClick:o,$menuTheme:n,children:(0,l.jsx)(c.wF,{})})]})}));var g=t(54769);var f=t(5441);const p=e=>{let{getItems:i,menuType:t,theme:n,menuTheme:s}=e;const d=i(),o=(e=>{switch(e){case g.L.Horizontal:return v;case g.L.Hamburger:return a;default:return v}})(t);return(0,f.T)({theme:n,children:(0,l.jsx)(o,{items:d,menuTheme:s})})}},84720:(e,i,t)=>{t.r(i),t.d(i,{geniallyMenuEditorScript:()=>u});var l=t(45992),n=t(57277),s=t(45577),d=t(15690);var o,r=t(89035),a=t(54769);!function(e){e[e.MD=380]="MD"}(o||(o={}));const m=function(e,i){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var l;if(!e||!e.exists)return;const n=e,{menuType:s}=i;if(t){if(s===a.L.Horizontal){const e=(e=>{switch(e){case a.L.Horizontal:return{minWidth:o.MD,maxWidth:void 0};case a.L.Hamburger:return{minWidth:r.N_.width,maxWidth:o.MD};default:return{minWidth:void 0,maxWidth:void 0}}})(s),i=n.parentSlide.size.width-24,t=Math.max(null!==(l=e.minWidth)&&void 0!==l?l:0,i);n.setSize(t,r.cE.height),n.setPosition((n.parentSlide.size.width-t)/2,n.y)}s===a.L.Hamburger&&n.setSize(r.N_.width,r.N_.height)}};var c=t(93918);const u=e=>{let{script:i,editor:t}=e;t.justCreatedFromSidebar&&(e=>{let{editor:i,script:t}=e;0===t.getConfig().slidesToDisplay.selectedSlides.length&&t.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=i.getSlides().map((e=>e.id))}))})({editor:t,script:i}),t.on("slideCreated",(e=>{let{slide:t}=e;((e,i)=>{if(!1===e.getConfig().slidesToDisplay.allSlidesSelected){const t=e.item;t.excludedSlidesIds=[...t.excludedSlidesIds,i.id]}})(i,t)})),t.on("slideDeleted",(e=>{let{slide:l}=e;((e,i)=>{1===e.getSlides().length&&i.mutateConfig((e=>{e.slidesToDisplay.allSlidesSelected=!0,e.slidesToDisplay.selectedSlides=[]}))})(t,i),((e,i)=>{const{allSlidesSelected:t,selectedSlides:l}=e.getConfig().slidesToDisplay;if(!t)if(null===l||void 0===l?void 0:l.includes(i.id))e.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=e.slidesToDisplay.selectedSlides.filter((e=>e!==i.id))}));else{const t=e.item;t.excludedSlidesIds=t.excludedSlidesIds.filter((e=>e!==i.id))}})(i,l)})),i.on("configChange",(e=>{let{config:l,prevConfig:n}=e;const s=i.item;s&&((e=>{let{item:i}=e;if(!i||!i.exists)return;const t=i;i.thumbnail&&(t.thumbnail=void 0)})({item:s}),n&&l.menuType!==n.menuType&&m(s,l,!0),n&&((e,i)=>{return e.slidesToDisplay.allSlidesSelected!==(null===i||void 0===i?void 0:i.slidesToDisplay.allSlidesSelected)||(t=e.slidesToDisplay.selectedSlides,l=null===i||void 0===i?void 0:i.slidesToDisplay.selectedSlides,t.length!==l.length||!t.every(((e,i)=>e===l[i])));var t,l})(l,n)&&((e,i,t,l)=>{e.item&&e.item.exists&&(function(e,i,t){const l=t.slidesToDisplay.selectedSlides.filter((e=>i.getSlides().find((i=>i.id===e))));l.length!==t.slidesToDisplay.selectedSlides.length&&e.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=l}))}(e,i,t),function(e,i,t,l){const{item:n}=e,s=n;(t.slidesToDisplay.allSlidesSelected!==(null===l||void 0===l?void 0:l.slidesToDisplay.allSlidesSelected)||t.slidesToDisplay.selectedSlides!==(null===l||void 0===l?void 0:l.slidesToDisplay.selectedSlides))&&(s.excludedSlidesIds=function(e,i){if(e.slidesToDisplay.allSlidesSelected)return[];const t=i.getSlides(),l=e.slidesToDisplay.selectedSlides||[];return t.filter((e=>!l.includes(e.id))).map((e=>e.id))}(t,i),e.mutateConfig((e=>{e.slidesToDisplay.allSlidesSelected&&(e.slidesToDisplay.selectedSlides=[])})))}(e,i,t,l))})(i,t,l,n),s.showOverflow||(s.showOverflow=!0),s.isTransversal||(s.isTransversal=!0))})),(0,n.x)({getTargetNodeItem:()=>i.item,renderApp:()=>{var e,n;const{theme:d,t:o}=t,{item:r}=i,{menuItems:a,menuTheme:m,menuType:u}=i.getConfig();return(0,l.jsx)(s.q,{getItems:()=>(0,c.N)(a,o,!0),menuType:u,theme:d,itemSize:{width:null!==(e=null===r||void 0===r?void 0:r.width)&&void 0!==e?e:0,height:null!==(n=null===r||void 0===r?void 0:r.height)&&void 0!==n?n:0},menuTheme:m})},renderThumbnailApp:()=>{var e,n;const{theme:s,t:o}=t,{item:r}=i,{menuItems:a,menuTheme:m,menuType:u}=i.getConfig();return(0,l.jsx)(d.M,{getItems:()=>(0,c.N)(a,o,!0),menuType:u,theme:s,menuTheme:m,itemSize:{width:null!==(e=null===r||void 0===r?void 0:r.width)&&void 0!==e?e:0,height:null!==(n=null===r||void 0===r?void 0:r.height)&&void 0!==n?n:0}})},nodePrefix:"menu"})({script:i,editor:t})}},93918:(e,i,t)=>{t.d(i,{N:()=>s,e:()=>o});var l=t(48237);const n=(e,i,t)=>""===e?i(t?"__new.editor.widget.menu.sidebar.emptyTitlePlaceholder":"__new.view.widget.menu.sidebar.emptyTitlePlaceholder"):e,s=(e,i,t)=>e.map(((e,s)=>{var d;const o=(null===(d=e.menuItemAction.action)||void 0===d?void 0:d.type)===l.L.GoToSlide;return{text:n(e.menuItemName,i,t),key:s,onClick:()=>{},isLink:o,isActive:!1,isAllowed:o,altText:e.altText}})),d={active:!1,allowed:!1},o=(e,i,t)=>e.map(((e,s)=>{var o,r;const a=!!(null===(o=e.menuItemAction)||void 0===o?void 0:o.data)&&(null===(m=e.menuItemAction.data)||void 0===m?void 0:m.type)===l.L.GoToSlide;var m;const{active:c,allowed:u}=a&&(null===(r=e.menuItemAction)||void 0===r?void 0:r.data)?i.getGoToSlideState(e.menuItemAction.data):d;return{text:n(e.menuItemName,i.t,t),key:s,onClick:()=>{var i;return null===(i=e.menuItemAction)||void 0===i?void 0:i.run()},isLink:a,isActive:c,isAllowed:u,altText:e.altText}}))},57277:(e,i,t)=>{t.d(i,{x:()=>n});var l=t(70377);function n(e){let{getTargetNodeItem:i,renderApp:t,renderThumbnailApp:n,nodePrefix:s}=e;return e=>{let{script:d,editor:o}=e,r=null,a=[];function m(e){r&&(l.unmountComponentAtNode(r),r=null),e&&"innerHtml"in e&&(e.innerHtml='<div class="card-iframe"><div style="width: 100%; height: 100%; background: #FF0000; color: #FFFFFF;">Deleted</div><script><\/script></div>')}function c(){r&&l.render(t(),r)}function u(){const e=i(d.getConfig());if(!e)return;const t=`${s}-${e.id}`;"innerHtml"in e&&(e.innerHtml=`<div class="card-iframe"><div id="${t}" class="genially-widget-app" style="width: 100%; height: 100%;"></div></div>`),requestAnimationFrame((()=>{r="idOfFreeNode"in e?document.getElementById(e.idOfFreeNode)||null:document.getElementById(t)||null,c()}))}function h(){n&&a.length&&a.forEach((e=>{l.render(n(),e)}))}function v(){const e=i(d.getConfig());e&&"idOfThumbnailFreeNode"in e&&requestAnimationFrame((()=>{const i=document.getElementsByClassName(e.idOfThumbnailFreeNode);a=Array.from(i),h()}))}d.on("configChange",(e=>{let{config:t,prevConfig:l}=e;const n=i(t),s=l?i(l):void 0;s&&s!==n&&m(s),n&&(n!==s?(u(),v()):(c(),h()))})),d.on("dispose",(()=>{m(i(d.getConfig()))})),o.on("itemMount",(e=>{let{item:i}=e;i===d.item&&u()})),o.on("itemUnmount",(e=>{let{item:i}=e;i===d.item&&m()})),o.on("itemThumbnailMount",(e=>{let{item:i}=e;i===d.item&&v()}))}}}}]);
//# sourceMappingURL=https://s3-static-genially.genially.com/view/static/js/4720.7f0c6cbe.chunk.js.map